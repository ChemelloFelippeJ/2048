{"ast":null,"code":"var _jsxFileName = \"/home/felippe/myProjects/2019-2_DevWeb01/WEB/src/components/CriarVideoAutomatic.js\";\nimport React, { Component } from 'react';\nimport api from '../services/api';\nexport class CriarVideoAutomatic extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchTerm: \"\",\n      prefix: \"\",\n      qtdSlide: \"\",\n      language: \"PT\",\n      enviou: false,\n      id: null,\n      titulo: \"\",\n      url: \"\",\n      terminou: false,\n      lastStateUrl: null,\n      lastRequisitionTime: 0\n    };\n  }\n\n  salvaEstado(text, input) {\n    this.setState({\n      [input]: text.target.value\n    });\n  }\n\n  enviaContent() {\n    if (this.checkState()) {\n      this.submitContent();\n    }\n  }\n\n  checkState() {\n    if (this.state.prefix != \"\") {\n      if (this.state.searchTerm != \"\") {\n        if (this.state.language == \"PT\" || this.state.language == \"EN\") {\n          if (this.state.qtdSlide.match(/[0-9]{1,2}/)) {\n            return true;\n          } else {\n            alert(\"Quantidade de Slides invalidos\");\n          }\n        } else {\n          alert(\"Linguagem Invalida\");\n        }\n      } else {\n        alert(\"Termo de pesquisa inválido\");\n      }\n    } else {\n      alert(\"Prefixo inválido\");\n    }\n  }\n\n  async submitContent() {\n    const config = {\n      url: '/content',\n      method: 'post',\n      headers: {\n        Authorization: 'Bearer '.concat(localStorage.getItem('token'))\n      },\n      data: {\n        \"prefix\": this.state.prefix,\n        \"searchTerm\": this.state.searchTerm,\n        \"language\": this.state.language,\n        \"qtdSentences\": this.state.qtdSlide\n      }\n    };\n    await api.request(config).then(response => {\n      console.log(\"Recebi o Id do video e a resposta foi \" + response.status);\n\n      if (response.status == 200) {\n        this.setState({\n          'id': response.data,\n          'enviou': true\n        });\n        console.log(\"Salvei os estados\");\n      } else {\n        console.error(response);\n        window.alert(\"Erro ao criar video\");\n      }\n    }).catch(error => {\n      console.error(error);\n      window.alert(\"Erro ao criar video\");\n    });\n  }\n\n  async buscaDadosDoVideo() {\n    const config = {\n      url: \"/content/\".concat(this.state.id),\n      method: 'get',\n      headers: {\n        Authorization: 'Bearer '.concat(localStorage.getItem('token'))\n      }\n    };\n    await api.request(config).then(response => {\n      if (response.status == 200) {\n        if (response.data.url.match(/([0-9])+/g)) {\n          console.log(\"Finalizando\");\n          this.setState({\n            'url': response.data.url\n          });\n          window.location.href = \"../exibevideo/\" + response.data.url;\n        } else {\n          if (this.state.lastStateUrl == null || this.state.lastStateUrl != response.data.url) {\n            console.log(\"Incrementando\");\n            this.setState({\n              'titulo': \"\".concat(response.data.prefix, \" \").concat(response.data.searchTerm),\n              'url': \"\".concat(this.state.url, \" \").concat(response.data.url),\n              'lastStateUrl': response.data.url\n            });\n          } else {\n            console.log(\"Recebi a mesma informaçao\");\n          }\n        }\n      } else {\n        console.error(response);\n        window.alert(\"Erro ao receber resposta\");\n      }\n    }).catch(error => {\n      console.error(error);\n      window.alert(\"Erro ao Buscar dados\");\n    });\n  }\n\n  render() {\n    if (this.state.enviou) {\n      this.buscaDadosDoVideo();\n      setInterval(() => {\n        this.buscaDadosDoVideo();\n      }, 3000);\n      return React.createElement(\"div\", {\n        className: \"CorpoCVA\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"main\", {\n        className: \"page AutomaticVideo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"portfolio-block projects compact-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Criar v\\xEDdeo autom\\xE1ticamente\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, this.state.titulo), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, this.state.url), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => window.location.reload(false),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"Criar outro!\")))));\n    } else {\n      return React.createElement(\"div\", {\n        className: \"CorpoCVA\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"main\", {\n        className: \"page AutomaticVideo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"portfolio-block projects compact-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Criar v\\xEDdeo autom\\xE1ticamente\")), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"Termo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Insira um termo para pesquisa:*\"), React.createElement(\"input\", {\n        required: true,\n        type: \"text\",\n        class: \"form-control\",\n        placeholder: \"Exemplo: Tecnologia\",\n        onChange: text => {\n          this.salvaEstado(text, \"searchTerm\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"prefixo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Diga o prefixo desejado:*\"), React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        placeholder: \"Exemplo: Hist\\xF3ria da\",\n        onChange: text => {\n          this.salvaEstado(text, \"prefix\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"slides\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"N\\xFAmero de slides desejados:(1-15)*\"), React.createElement(\"input\", {\n        type: \"text\",\n        pattern: \"^[1-9]{1,2}$\",\n        required: true,\n        class: \"form-control\",\n        onChange: text => {\n          this.salvaEstado(text, \"qtdSlide\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"slides\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"Qual linguagem voc\\xEA deseja*\"), React.createElement(\"select\", {\n        class: \"form-control\",\n        onChange: text => {\n          this.salvaEstado(text, \"language\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"PT\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Portugu\\xEAs\"), React.createElement(\"option\", {\n        value: \"EN\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"Ingl\\xEAs\")))), React.createElement(\"small\", {\n        id: \"emailHelp\",\n        className: \"form-text text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"*Campo obrigat\\xF3rio\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => this.enviaContent(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \"Enviar!\"))));\n    }\n  }\n\n}\nexport default CriarVideoAutomatic;","map":{"version":3,"sources":["/home/felippe/myProjects/2019-2_DevWeb01/WEB/src/components/CriarVideoAutomatic.js"],"names":["React","Component","api","CriarVideoAutomatic","constructor","props","state","searchTerm","prefix","qtdSlide","language","enviou","id","titulo","url","terminou","lastStateUrl","lastRequisitionTime","salvaEstado","text","input","setState","target","value","enviaContent","checkState","submitContent","match","alert","config","method","headers","Authorization","concat","localStorage","getItem","data","request","then","response","console","log","status","error","window","catch","buscaDadosDoVideo","location","href","render","setInterval","reload"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport api from '../services/api';\r\n\r\nexport class CriarVideoAutomatic extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n        searchTerm: \"\",\r\n        prefix: \"\",\r\n        qtdSlide: \"\",\r\n        language: \"PT\",\r\n        enviou: false,\r\n        id: null,\r\n        titulo: \"\",\r\n        url: \"\",\r\n        terminou: false,\r\n        lastStateUrl: null,\r\n        lastRequisitionTime: 0\r\n    }\r\n  }\r\n\r\n  salvaEstado(text, input) {\r\n    this.setState({[input]: text.target.value});\r\n  }\r\n\r\n  enviaContent() {\r\n    if (this.checkState()) {\r\n      this.submitContent();\r\n    }\r\n  }\r\n\r\n  checkState() {\r\n    if(this.state.prefix != \"\") {\r\n      if(this.state.searchTerm != \"\") {\r\n        if(this.state.language == \"PT\" || this.state.language == \"EN\") {\r\n          if(this.state.qtdSlide.match(/[0-9]{1,2}/)) {\r\n            return true;\r\n          }else{\r\n            alert(\"Quantidade de Slides invalidos\");\r\n          }\r\n        }else{\r\n          alert(\"Linguagem Invalida\");\r\n        }\r\n      }else{\r\n        alert(\"Termo de pesquisa inválido\");\r\n      }\r\n    }else{\r\n      alert(\"Prefixo inválido\"); \r\n    }\r\n  }\r\n\r\n  async submitContent() {\r\n    const config = {\r\n      url: '/content',\r\n      method: 'post',\r\n      headers: { \r\n          Authorization: 'Bearer '.concat(localStorage.getItem('token'))\r\n      },\r\n      data: {\r\n        \"prefix\": this.state.prefix,\r\n        \"searchTerm\": this.state.searchTerm,\r\n        \"language\": this.state.language,\r\n        \"qtdSentences\": this.state.qtdSlide\r\n      }\r\n    }\r\n    await api.request(config)\r\n      .then((response) => {\r\n          console.log(\"Recebi o Id do video e a resposta foi \" + response.status)\r\n          if(response.status == 200){\r\n            this.setState({\r\n              'id': response.data,\r\n              'enviou': true\r\n            })  \r\n            console.log(\"Salvei os estados\")\r\n          }else{\r\n              console.error(response);\r\n              window.alert(\"Erro ao criar video\");    \r\n          }\r\n      })\r\n      .catch((error) => {\r\n          console.error(error);\r\n          window.alert(\"Erro ao criar video\");\r\n      })\r\n  }\r\n\r\n  async buscaDadosDoVideo(){\r\n    const config = {\r\n      url: `/content/${this.state.id}`,\r\n      method: 'get',\r\n      headers: { \r\n        Authorization: 'Bearer '.concat(localStorage.getItem('token'))\r\n      }\r\n    }\r\n    await api.request(config)\r\n      .then((response) => {\r\n          if(response.status == 200){\r\n              if(response.data.url.match(/([0-9])+/g)){\r\n                console.log(\"Finalizando\")\r\n                this.setState({\r\n                  'url': response.data.url\r\n                })\r\n                window.location.href = \"../exibevideo/\" + response.data.url\r\n              }else{\r\n                if(this.state.lastStateUrl == null || this.state.lastStateUrl != response.data.url){\r\n                  console.log(\"Incrementando\")\r\n                  this.setState({\r\n                    'titulo': `${response.data.prefix} ${response.data.searchTerm}`,\r\n                    'url': `${this.state.url} ${response.data.url}`,\r\n                    'lastStateUrl': response.data.url\r\n                  })\r\n                }else{\r\n                  console.log(\"Recebi a mesma informaçao\")\r\n                }\r\n              }\r\n          }else{\r\n              console.error(response);\r\n              window.alert(\"Erro ao receber resposta\");    \r\n          }\r\n      })\r\n      .catch((error) => {\r\n          console.error(error);\r\n          window.alert(\"Erro ao Buscar dados\");\r\n      })\r\n  }\r\n\r\n  render() {\r\n    if(this.state.enviou){\r\n      this.buscaDadosDoVideo()\r\n      setInterval(() => {this.buscaDadosDoVideo()}, 3000);\r\n      return (\r\n        <div className=\"CorpoCVA\">\r\n          <main className=\"page AutomaticVideo\">\r\n            <section className=\"portfolio-block projects compact-grid\">\r\n              <div className=\"heading\">\r\n                <h2>Criar vídeo automáticamente</h2>\r\n              </div>\r\n              <div> \r\n                <h3>{this.state.titulo}</h3> \r\n                <h4>{this.state.url}</h4>\r\n                <br></br>\r\n                <button className=\"btn btn-primary\" onClick={() => window.location.reload(false)}>Criar outro!</button>\r\n              </div>\r\n            </section>\r\n          </main>\r\n        </div>\r\n      )\r\n    }else{\r\n      return (\r\n        <div className=\"CorpoCVA\">\r\n          <main className=\"page AutomaticVideo\">\r\n            <section className=\"portfolio-block projects compact-grid\">\r\n              <div className=\"heading\">\r\n                <h2>Criar vídeo automáticamente</h2>\r\n              </div>\r\n              <form>  \r\n                <div className=\"form-group\">\r\n                  <label for=\"Termo\">Insira um termo para pesquisa:*</label>\r\n                  <input required type=\"text\" class=\"form-control\" placeholder=\"Exemplo: Tecnologia\" onChange={(text) => { this.salvaEstado(text, \"searchTerm\") }}/>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label for=\"prefixo\">Diga o prefixo desejado:*</label>\r\n                  <input type=\"text\" class=\"form-control\" placeholder=\"Exemplo: História da\" onChange={(text) => { this.salvaEstado(text, \"prefix\") }}/>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label for=\"slides\">Número de slides desejados:(1-15)*</label>\r\n                  <input type=\"text\" pattern=\"^[1-9]{1,2}$\" required class=\"form-control\" onChange={(text) => { this.salvaEstado(text, \"qtdSlide\") }}/>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label for=\"slides\">Qual linguagem você deseja*</label>\r\n                  <select class=\"form-control\" onChange={(text) => { this.salvaEstado(text, \"language\") }}>\r\n                    <option value=\"PT\">Português</option>\r\n                    <option value=\"EN\">Inglês</option>\r\n                  </select>\r\n                </div>\r\n              </form>\r\n                <small id=\"emailHelp\" className=\"form-text text-muted\">*Campo obrigatório</small>\r\n                <br></br>\r\n                <button className=\"btn btn-primary\" onClick={() => this.enviaContent()}>Enviar!</button>\r\n              \r\n            </section>\r\n          </main>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default CriarVideoAutomatic;\r\n"]},"metadata":{},"sourceType":"module"}